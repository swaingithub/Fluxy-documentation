---
title: Fluxy DevTools
description: Unlocking powerful debugging and stability features with Fluxy.
---

# Fluxy DevTools

Fluxy DevTools isn't just about debuggingâ€”it's about **Stability Management**. The framework includes a comprehensive "Stability Kernel" that actively guards against entire categories of Flutter crashes.

## 1. The Stability Kernel

Fluxy proactively scans your widget tree for violations. You control its aggression level using `Fluxy.setStrictMode(bool)`.

### Strict vs. Relaxed Mode

1.  **Relaxed Mode (Default)**: Designed for **Production**.
    -   **Behavior**: When a crash-inducing error is detected, Fluxy **auto-repairs** it, logs a silent warning, and keeps the app running.
    -   **Goal**: Ensure 99.99% uptime. Users should never see a "Grey Screen of Death".
    -   **Trade-off**: May introduce minor performance hits (e.g., auto-applied `shrinkWrap`) to save the crash.

2.  **Strict Mode**: Designed for **Development**.
    -   **Behavior**: Intentionally throws a `FluxyLayoutViolationException` immediately upon detection.
    -   **Goal**: Force you to fix the root cause instead of relying on Fluxy's safety net.

```dart
void main() async {
  await Fluxy.init();
  
  // Enable strict mode locally to catch bugs early
  if (kDebugMode) {
    Fluxy.setStrictMode(true); 
  }
  
  runApp(MyApp());
}
```

---

## 2. Crash Prevention Categories

Fluxy guards against three main types of crashes.

### Type A: Layout Crashes (The "Red Screen")

| Crash Scenario | Fluxy Detection | Relaxed Mode Auto-Fix |
| :--- | :--- | :--- |
| **Infinite Scroll (List inside Column)** | "Unbounded Height" violation. | Forces `shrinkWrap: true` and disables inner scrolling. |
| **The "Stretch" Crash** | `CrossAxisAlignment.stretch` in scrollable direction. | Swaps alignment to `.center` instantly. |
| **Unbounded Expansion** | `Expanded` inside a ScrollView. | Removes the `Expanded` wrapper via `FxSafeExpansion`. |

### Type B: Render & Paint Crashes

These occur deeper in the pipeline, often freezing the UI thread.

1.  **Dual Infinity**:
    -   **Crash**: A widget requests `double.infinity` for both width *and* height without a parent boundary.
    -   **Fix**: Fluxy clamps the size to the window dimensions.
2.  **NaN Geometry**:
    -   **Crash**: Calculating a size of `NaN` or `Infinity` (e.g., dividing by zero in a custom painter).
    -   **Fix**: `RenderStabilityGuard` detects invalid geometry and falls back to `0x0`.
3.  **Painting Exceptions**:
    -   **Crash**: An error thrown during `paint()`.
    -   **Fix**: `FluxyRenderGuard` catches the exception and draws a **red placeholder box** instead of crashing the entire route.

### Type C: Async & Lifecycle Crashes

1.  **"SetState() after dispose()"**:
    -   **Crash**: An async API call returns after the user navigates away, trying to update a disposed widget.
    -   **Fix**: `FluxyAsyncGuard` checks `context.mounted` before every reactive update and silently drops the frame if unmounted.

---

## 3. Visual Layout Inspector

Wrap your app root to enable the visual inspector overlay.

```dart
void main() {
  runApp(
    Fluxy.debug(
      child: MyApp(),
    ),
  );
}
```

-   **Toggle Inspector**: Shake device or press the on-screen generic button.
-   **Highlight Overflows**: Draws red boxes around widgets that are clipping or overflowing.
-   **Repaint Rainbow**: visualized to debug excessive rebuilds.

---

## 4. Stability Metrics

Fluxy tracks every intercepted crash and auto-repair. You can view this summary to audit your app's health.

### Usage Patterns

There are two primary ways to use the stability summary:

1.  **Manual Audit**: Trigger it from a debug dashboard or console to check session health.
2.  **Error Reporting**: attach it to crash reports to see if the system was unstable before the crash.

### Example: Log on Crash

Hook into your global error handler to print the stability report whenever an exception occurs.

```dart
void main() {
  Fluxy.onError((error, stack) {
    debugPrint("Fluxy Global Error: $error");
    
    // Check if the system was already unstable
    Fluxy.printStabilitySummary(); 
  });

  runApp(MyApp());
}
```

**Sample Output:**
```
[Fluxy Stability] Session Report:
- Prevented Crashes: 3
- Layout Repairs: 12
- Active Guards: 5
```

By understanding these guards, you can decide when to fix a bug (Strict Mode) and when to let Fluxy handle it (Relaxed Mode).
